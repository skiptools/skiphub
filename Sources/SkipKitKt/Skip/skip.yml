# skip.tools per-configuration file

#skip:
#  package: 'skip.kit'

# the blocks to add to the build.gradle.kts
build:
  contents:
    - block: 'plugins'
      contents:
        #- 'id("com.android.application") version "7.4.2"'
        - 'kotlin("android") version "1.8.10"'
        # currently matches "8.1.0-alpha10"
        - 'id("com.android.library") version "8.1.+"'
        #- 'id("com.android.library") version "7.4.2"'
        #- 'id("org.jetbrains.kotlin.android") version "1.5.31"'

      # we need to replace the `kotlin-dsl` plugin or else
      # error: “The 'java' plugin has been applied, but it is not compatible with the Android plugins.”
      remove:
        - '`kotlin-dsl`'

    - block: 'android'
      contents:
        - 'namespace = group as String'
        - 'compileSdkVersion(31)'
        - block: 'defaultConfig'
          contents:
            - 'minSdkVersion(31)'
            - 'targetSdkVersion(31)'
            - 'testInstrumentationRunner = "androidx.test.runner.AndroidJUnitRunner"'
        - block: 'compileOptions'
          contents:
            - 'sourceCompatibility = JavaVersion.VERSION_11'
            - 'targetCompatibility = JavaVersion.VERSION_11'
        - block: 'kotlinOptions'
          contents:
            - 'jvmTarget = "11"'

    - block: 'dependencies'
      contents:
        - 'testImplementation("org.robolectric:robolectric:4.10+")'
        - 'testImplementation("androidx.test:core:1.5.0")'

# we might want this for test logging:
#tasks.withType<Test>().configureEach {
#    systemProperties.put("robolectric.logging", "stdout")
#    testLogging {
#        this.showStandardStreams = true
#    }
#}

# the blocks to add to the settings.gradle.kts
settings:
  contents:
    - block: 'pluginManagement'
      contents:
        - block: 'repositories'
          contents:
            - 'google()'

    - block: 'dependencyResolutionManagement'
      contents:
        - block: 'repositories'
          contents:
            - 'google()'

#settings:
#  - pluginManagement:
#    - repositories
#      - 'google()'
#
#  - dependencyResolutionManagement:
#    - repositories
#      - 'google()'
